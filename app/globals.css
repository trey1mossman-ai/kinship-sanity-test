/* Optimized CSS - fonts loaded via next/font for better performance */
@import "tailwindcss";
@import "../styles/typography.css";

@custom-variant dark (&:is(.dark *));

/* Safe area padding for mobile devices with notches */
.safe-area-bottom {
  padding-bottom: env(safe-area-inset-bottom, 0.75rem);
}

.safe-area-top {
  padding-top: env(safe-area-inset-top, 0);
}

/* Hide scrollbar for mobile galleries */
.scrollbar-hide::-webkit-scrollbar {
  display: none;
}

.scrollbar-hide {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

:root {
  /* Kinship Landing Brand Colors - DO NOT DEVIATE */
  --kinship-green: #849e74;        /* Primary CTA, links, stars - Updated to evergreen */
  --kinship-green-dark: #667C58;   /* CTA hover/active */
  --kinship-green-light: #697F5B;  /* Focus ring / subtle accents */
  --kinship-slate: #4f575c;        /* Dark slate text/borders */
  --kinship-latte: #efe7dd;        /* Warm off-white backgrounds */
  --kinship-wasabi: #aec69a;       /* Light green for newsletter */
  --kinship-text: #080806;         /* Headings + body */
  --kinship-white: #FFFFFF;        /* Cards/primary background */
  --kinship-gray-bg: #F3F3F3;      /* Alt sections */
  --kinship-divider: #E5E7E4;      /* Borders/dividers */
  --kinship-sage: #EEF0EB;         /* Footer/subtle panels */
  --kinship-topo: #EBEBEB;         /* Topographic strokes */
  
  /* Mapped variables for component usage */
  --primary-bg: var(--kinship-white);
  --primary-text: var(--kinship-text);
  --secondary-text: #4A4A4A;       /* Derived from kinship-text for contrast */
  --accent-1: var(--kinship-green-light);
  --accent-2: var(--kinship-sage);
  --cta-bg: var(--kinship-green);
  --cta-hover: var(--kinship-green-dark);
  --borders: var(--kinship-divider);
  --section-alt: var(--kinship-gray-bg);
  
  /* Legacy color mappings updated to Kinship palette */
  --ink: var(--kinship-text);
  --charcoal: #4A4A4A;
  --sand: var(--kinship-gray-bg);
  --stone: var(--kinship-sage);
  --olive: var(--kinship-green);
  --olive-dark: var(--kinship-green-dark);
  
  /* Typography Scale */
  --font-display: var(--font-fraunces, var(--font-playfair));
  --font-body: var(--font-inter);
  
  /* Type scale: H1 40/44, H2 28/34, H3 22/28, body 16/26, small 14/22 */
  --h1-size: 2.5rem;  /* 40px */
  --h1-line: 2.75rem; /* 44px */
  --h2-size: 1.75rem; /* 28px */
  --h2-line: 2.125rem; /* 34px */
  --h3-size: 1.375rem; /* 22px */
  --h3-line: 1.75rem; /* 28px */
  --body-size: 1rem; /* 16px */
  --body-line: 1.625rem; /* 26px */
  --small-size: 0.875rem; /* 14px */
  --small-line: 1.375rem; /* 22px */
  
  /* Shadows */
  --shadow-hairline: 0 1px rgba(0, 0, 0, 0.06);
  --shadow-soft: 0 2px 8px rgba(0, 0, 0, 0.08);
  --shadow-deep: 0 8px 24px rgba(0, 0, 0, 0.12);
  --text-shadow-soft: 0 1px 2px rgba(0, 0, 0, 0.35);
}

@layer base {
  * {
    border-color: rgba(236, 230, 221, 0.2);
  }

  html {
    scroll-behavior: smooth;
  }

  /* Respect user's motion preferences */
  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
  }

  body {
    @apply antialiased;
    background-color: var(--primary-bg);
    color: var(--primary-text);
    font-family: var(--font-body);
    /* Improve text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }
  
  /* Typography Scale - Exact specs */
  h1 {
    font-size: var(--h1-size);
    line-height: var(--h1-line);
    @apply font-bold;
    color: var(--kinship-text);
    font-family: var(--font-display);
    letter-spacing: -0.02em;
  }
  
  h2 {
    font-size: var(--h2-size);
    line-height: var(--h2-line);
    @apply font-bold;
    /* color: var(--kinship-text); */ /* Removed to allow Tailwind utility classes */
    font-family: var(--font-display);
    letter-spacing: -0.01em;
  }
  
  h3 {
    font-size: var(--h3-size);
    line-height: var(--h3-line);
    @apply font-semibold;
    color: var(--kinship-text);
    font-family: var(--font-display);
  }
  
  body, p {
    font-size: var(--body-size);
    line-height: var(--body-line);
  }
  
  small {
    font-size: var(--small-size);
    line-height: var(--small-line);
  }
  
  .lead {
    font-size: clamp(1.0625rem, 0.6vw + 0.7rem, 1.1875rem);
    line-height: 1.6;
  }
  
  /* Focus styles for accessibility */
  *:focus-visible {
    @apply outline-none ring-2 ring-offset-2 ring-offset-white;
    --tw-ring-color: var(--olive);
    box-shadow: 0 0 0 3px rgba(62, 95, 58, 0.3);
  }
  
  /* High contrast focus for accessibility */
  @media (prefers-contrast: high) {
    *:focus-visible {
      @apply ring-4 ring-offset-4;
    }
  }
}

@layer utilities {
  /* Subtle Kinship steel pattern background utility */
  .bg-kinship-steel {
    /* Uses Kinship steel pattern placed in public/textures. Note: space is URL-encoded */
    background-image: url('/textures/kinship-steel%20pattern.webp');
    background-repeat: no-repeat;
    background-size: cover;
    background-position: center;
  }

  /* Container system - mobile first with proper centering */
  .container {
    @apply mx-auto w-full max-w-[1140px] px-4 sm:px-6 lg:px-8;
  }
  
  /* Section spacing - Exact specs: 80 (desktop) / 56 (tablet) / 40 (mobile) */
  .section-spacing {
    @apply py-10 md:py-14 lg:py-20;
  }
  
  .section-spacing-tight {
    @apply py-8 md:py-12 lg:py-16;
  }
  
  /* Content centering utilities */
  .content-center {
    @apply mx-auto text-center max-w-3xl;
  }
  
  /* Section dividers and distinguishing features */
  .section-divider {
    @apply relative;
  }
  
  .section-divider::before {
    content: '';
    @apply absolute top-0 left-1/2 -translate-x-1/2 w-12 h-0.5;
    background: linear-gradient(90deg, transparent, var(--accent-1), transparent);
  }
  
  .section-fade-in {
    @apply relative overflow-hidden;
  }
  
  .section-fade-in::before {
    content: '';
    @apply absolute top-0 inset-x-0 h-8 bg-gradient-to-b from-white/80 to-transparent pointer-events-none z-10;
  }
  
  .stack {
    @apply space-y-4 sm:space-y-6;
  }
  
  .prose-container {
    @apply mx-auto max-w-2xl;
  }
  
  /* Shadows */
  .shadow-hairline {
    box-shadow: var(--shadow-hairline);
  }
  
  .text-shadow-soft {
    text-shadow: var(--text-shadow-soft);
  }

  /* Chips / badges */
  .chip {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm border;
    border-color: var(--kinship-divider);
    background-color: var(--kinship-sage);
    color: var(--kinship-text);
  }
  .chip-brand {
    @apply inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium;
    background-color: var(--kinship-green);
    color: white;
  }

  /* Keyword highlight utility for reviews */
  .highlight-kinship {
    background-color: var(--kinship-sage);
    color: var(--kinship-text);
    padding: 0 .15em;
    border-radius: 4px;
  }
  
  /* Hide scrollbar */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }
  
  /* Scroll snap */
  .snap-x {
    scroll-snap-type: x mandatory;
  }
  .snap-center {
    scroll-snap-align: center;
  }
  .snap-start {
    scroll-snap-align: start;
  }
  
  /* Text utilities */
  .text-balance {
    text-wrap: balance;
  }
  
  /* Small caps */
  .small-caps {
    @apply uppercase text-xs tracking-[0.12em] font-bold;
    letter-spacing: 0.1em;
  }
  
  /* Glass effect */
  .glass {
    @apply backdrop-blur-md bg-white/65 border border-white/40;
  }
  
  .glass-card {
    @apply backdrop-blur-sm border rounded-2xl p-4 sm:p-5 shadow-lg;
    background-color: rgba(255, 255, 255, 0.95);
    border-color: var(--borders);
  }
  
  /* Shadow utilities */
  .shadow-soft {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
  }
  
  /* Subtle section markers */
  .section-marker {
    @apply relative;
  }
  
  .section-marker::after {
    content: 'â—Š';
    @apply absolute -top-8 left-1/2 -translate-x-1/2 text-sm;
    color: var(--accent-1);
    opacity: 0.6;
  }
  
  /* Chip styles */
  .chip {
    @apply rounded-full px-3 py-1 text-xs;
  }
  
  /* Typography classes - mobile first */
  .heading-1 {
    font-size: clamp(1.875rem, 5vw, 3.75rem);
    @apply font-bold leading-[1.15];
  }
  
  .heading-2 {
    font-size: clamp(1.75rem, 4vw, 3rem);
    @apply font-bold leading-[1.2];
  }
  
  .heading-3 {
    font-size: clamp(1.5rem, 3vw, 2.25rem);
    @apply font-bold leading-[1.3];
  }
  
  .body-large {
    font-size: clamp(1.0625rem, 1vw + 0.5rem, 1.25rem);
    @apply leading-relaxed;
  }
  
  .body-base {
    font-size: clamp(0.9375rem, 1vw, 1.125rem);
    @apply leading-relaxed;
    letter-spacing: 0.01em;
  }
  
  /* Button styles - exact specs */
  .btn-primary {
    @apply inline-flex items-center justify-center text-white px-6 py-3 text-base font-semibold transition-all transform;
    background: #667C58;
    border: 2px solid #667C58;
    border-radius: 0;
  }
  .btn-primary:hover {
    background: #556649;
    border-color: #556649;
    transform: scale(1.05);
    box-shadow: 0 4px 12px rgba(102, 124, 88, 0.3);
  }
  .btn-primary:focus-visible {
    outline: none;
    box-shadow: 0 0 0 3px rgba(132, 158, 116, 0.5);
  }
  
  .btn-ghost {
    @apply inline-flex items-center justify-center border rounded-lg px-6 py-3 text-sm sm:text-base font-semibold transition-all shadow-sm hover:shadow-md;
    border-color: var(--borders);
    color: var(--secondary-text);
    background-color: var(--primary-bg);
  }
  .btn-ghost:hover {
    background-color: var(--accent-1);
    color: white;
    transform: translateY(-1px);
  }
  .btn-ghost:active {
    transform: translateY(0);
  }

  /* Ensure disabled buttons remain visible (avoid disappearing CTAs) */
  .btn-visible-disabled:disabled {
    opacity: .9;
    filter: saturate(.9);
  }
  
  .btn-responsive {
    @apply px-5 py-2.5 text-sm font-semibold sm:px-6 sm:py-3 sm:text-base md:px-8 md:py-4;
  }
  
  /* Card styles */
  .card {
    @apply rounded-2xl shadow-sm hover:shadow-md transition-shadow;
  }
  
  /* Aspect ratios */
  .aspect-4\/3 {
    aspect-ratio: 4 / 3;
  }
  
  /* Centered prose */
  .prose-center {
    @apply mx-auto max-w-prose text-center;
  }
  
  /* Motion utilities */
  @media (prefers-reduced-motion: no-preference) {
    .motion-safe\:hover\:rotate-6:hover {
      transform: rotate(6deg);
    }
  }

  /* Performance-optimized animations for rooms page */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translate3d(0, 20px, 0);
    }
    to {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
  }

  @keyframes fadeOut {
    from {
      opacity: 1;
      transform: translate3d(0, 0, 0);
    }
    to {
      opacity: 0;
      transform: translate3d(0, -20px, 0);
    }
  }

  @keyframes scaleIn {
    from {
      opacity: 0;
      transform: scale(0.95);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* GPU-accelerated hover effects */
  .hover-scale {
    will-change: transform;
    transition: transform 500ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hover-scale:hover {
    transform: scale3d(1.05, 1.05, 1);
  }

  .hover-opacity {
    transition: opacity 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .hover-opacity:hover {
    opacity: 0.8;
  }

  /* Room filter animation classes */
  .room-enter {
    animation: fadeInUp 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  .room-exit {
    animation: fadeOut 200ms cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Respect reduced motion preferences */
  @media (prefers-reduced-motion: reduce) {
    .hover-scale,
    .hover-opacity,
    .room-enter,
    .room-exit {
      animation: none !important;
      transition: none !important;
    }
  }
}
